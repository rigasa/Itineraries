(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"08S2":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("t/Na"),r=n("F/XL"),i=n("67Y/"),s=n("9Z1F"),a=n("CcnG"),u=function(){function e(e){this._httpClient=e,this.apiEndpoint={asddWS:"http://genevedurable.ch/ws/web-services.php",asddPECWS:"http://genevedurable.ch/PEC-ADM/ws/web-services.php",server:"https://fierce-savannah-90177.herokuapp.com/"}}return e.prototype.get=function(e,t,n){return void 0===t&&(t=null),void 0===n&&(n=!1),this.apiEndpoint[e]?(a="server"===e?{headers:new o.g({"Content-Type":"application/json","Access-Control-Allow-Origin":"http://localhost:4200"}),mode:"cors"}:{headers:new o.g({"Content-Type":"application/json"}),mode:"no-cors"},this._httpClient.get(this.apiEndpoint[e]+(t?""+t:""),a).pipe(Object(i.a)(function(e){return e||{}}),Object(s.a)(function(e){return Object(r.a)(new Error(""+(e.message||"Unable to request service API.")))}))):Object(r.a)(new Error("API Endpoint do not exist."));var a},e.prototype.post=function(e,t,n,a){void 0===t&&(t=null),void 0===n&&(n={}),void 0===a&&(a=!1);var u={headers:new o.g({"Content-Type":"application/json"})};return this.apiEndpoint[e]?this._httpClient.post(this.apiEndpoint[e]+(t?""+t:""),n,u).pipe(Object(i.a)(function(e){return e||{}}),Object(s.a)(function(e){return Object(r.a)(new Error(""+(e.message||"Unable to request service API.")))})):Object(r.a)(new Error("API Endpoint do not exist."))},e.ngInjectableDef=a.R({factory:function(){return new e(a.V(o.c))},token:e,providedIn:"root"}),e}()},"1dSU":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n("2fSE");var o=n("F/XL"),r=n("CcnG"),i=n("U8hQ"),s=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},a=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=function(){function e(e){this.storage=e,this.apiEndpoint={favorite:"rgs_favorite",user:"rgs_user",config:"rgs_itineraries"}}return e.prototype.set=function(e,t,n){return this.apiEndpoint[e]?this.storage.set(this.apiEndpoint[e]+":"+t,n):Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."))},e.prototype.get=function(e,t){return s(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.apiEndpoint[e]?[4,this.storage.get(this.apiEndpoint[e]+":"+t)]:[2,Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."))];case 1:return[2,n.sent()]}})})},e.prototype.remove=function(e,t){return s(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.apiEndpoint[e]?[4,this.storage.remove(this.apiEndpoint[e]+":"+t)]:[2,Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."))];case 1:return[2,n.sent()]}})})},e.prototype.clear=function(e){if(!this.apiEndpoint[e])return Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."));this.storage.clear().then(function(){console.log("all keys cleared")})},e.prototype.get2=function(e){return this.storage.get(e)},e.prototype.set2=function(e,t){return this.storage.set(e,t)},e.prototype.remove2=function(e,t){if(!this.apiEndpoint[e])return Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."))},e.prototype.clear2=function(e,t){if(!this.apiEndpoint[e])return Object(o.a)(new Error("STORAGE SERVICE API Endpoint do not exist."))},e.ngInjectableDef=r.R({factory:function(){return new e(r.V(i.a))},token:e,providedIn:"root"}),e}()},"6YIE":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n("2fSE"),n("1dSU"),n("caAo");var o=function(){function e(e,t,n){this.storage=e,this._save=t,this._us=n}return e.prototype.isFavorite=function(e){return this.getAllFavorites().then(function(t){return t&&-1!==t.indexOf(e)})},e.prototype.setFavoriteItem=function(e){var t=this;return this.getAllFavorites().then(function(n){if(n){for(var o=0,r=n;o<r.length;o++)if(r[o].name===e.name)return null;return n.push(e),t.storage.set("rgs_favorite",n)}return t.storage.set("rgs_favorite",[e])})},e.prototype.unFavoriteItem=function(e){var t=this;return this.getAllFavorites().then(function(n){if(n){var o=n.indexOf(e);return n.splice(o,1),t.storage.set("rgs_favorite",n)}})},e.prototype.getAllFavorites=function(){return this.storage.get("rgs_favorite")},e.prototype.getItineraryFavorite=function(e){},e.prototype.setItineraryFavorite=function(e){if(this._us.isConnected()){var t=this._us.getCurUserId(),n=new Date,o={name:e.iti_name,path:"/itinerary/"+e.id,userId:t,created:{$date:n.toISOString()},modified:{$date:n.toISOString()},lang:"fr-FR"};this.setFavoriteItem(o).then(function(e){e?console.log("FAVORITE ADDED"):console.log("FAVORITE EXISTS")})}else this._us.openLoginUser()},e.prototype.shareItineraryFavorite=function(e){console.log("SHARE ITINERARY FAVORITE")},e.prototype.getPointFavorite=function(e){},e.prototype.setPointFavorite=function(e,t){if(this._us.isConnected()){var n=this._us.getCurUserId(),o=new Date,r={name:t.imk_shortTitle,path:"/itinerary/"+e+"/"+t.id,userId:n,created:{$date:o.toISOString()},modified:{$date:o.toISOString()},lang:"fr-FR"};this.setFavoriteItem(r).then(function(e){e?console.log("FAVORITE ADDED"):console.log("FAVORITE EXISTS")})}else this._us.openLoginUser()},e.prototype.sharePointFavorite=function(e,t){console.log("SHARE POINT FAVORITE")},e}()},PCNd:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n("mSn9");var o=function(){}},RAm3:function(e,t,n){"use strict";n("2fSE");var o={firebase:{apiKey:"AIzaSyCZ9kZEEgcEKDDuUoDSzsGMCu05cvqelqU",authDomain:"asdd-acadf.firebaseapp.com",databaseURL:"https://asdd-acadf.firebaseio.com",projectId:"asdd-acadf",storageBucket:"asdd-acadf.appspot.com",messagingSenderId:"429322806770"},lang:"fr-FR",paths:{root_url:"http://www.genevedurable.ch/guides/wp-content/themes/guides/",ws_url:"http://www.genevedurable.ch/ws/web-services.php",pec_url:"http://genevedurable.ch/PEC/",cdn_url:"http://code.genevedurable.ch/latest/",cdn_img_url:"http://code.genevedurable.ch/latest/assets/images/",cdn_photos_url:"http://code.genevedurable.ch/latest/assets/itineraires/img/",cdn_odd_img_url:"http://code.genevedurable.ch/latest/assets/itineraires/assets/ODD/img/",gmaps_url:"https://maps.googleapis.com/maps/api/js?v=3.exp",blasons_url:"http://code.genevedurable.ch/latest/assets/images/blasons/thumbs-35/"},gmaps:{lat:"46.2587",lng:"6.11938",zoom:"11"},slideshow:{control_speed:"500",slideshow_speed:"5000"}},r=new Array;r["fr-FR"]={HOME:"Accueil",WELCOME:"Bienvenue!",GUIDE_DEC:"Guide D\xe9couverte",GUIDES_ITI:"Guides / Itin\xe9raires",GUIDES_DEC:"Guides d\xe9couverte",ITINERARIES:"Itin\xe9raires",ITINERARY:"Itin\xe9raire",ITINERARY_LIST:"Liste itin\xe9raires",SHOW_ITINERARY_LIST:"Afficher la liste des itin\xe9raires",CHOICE_ITINERARY:"Choisir votre itin\xe9raire",PRESENTATION:"Pr\xe9sentation",ORDER_GUIDE:"Commander guide",PREP_GUIDE:"Guide en pr\xe9paration",EDITED_GUIDE:"Guide edit\xe9",DISCOVERY_GUIDE:"Guide decouverte",OBJECTS:"Objets",THEMES:"Th\xe8mes",FOCUS:"Focus",OBJECTS_LIST:"Objets, Th\xe8mes, Focus",RGSMAP_LEGEND:"L\xe9gende",RGSMAP_ITINERARY:"Trac\xe9 du parcours",RGSMAP_BTN_SHOW:"Voir",RGSMAP_BTN_SHOW_ITINERARY:"Voir l'itin\xe9raire",RGSMAP_BTN_SHOW_DESC:"Clic pour afficher le panorama",RGSMAP_BTN_ITINERARY:"Itin\xe9raire",RGSMAP_BTN_ITINERARY_DESC:"Clic pour revenir \xe0 l'\xe9tat initial",RGSMAP_WEBSITES:"Sites des communes",RGSMAP_ACTIONS_DD:"Actions DD",LOADING:"Chargement",GET_ALL_PRINCIPLES:"Voir tous les principes",SHOW_WEBSITE:"Voir le site",ADD_FAVORIT:"Ajouter un favorit?",CONFIRM_SAVE_FAVORIT:"Voulez-vous sauvegarder le favorit?",CONFIRM_SAVE_POINT:"Voulez-vous sauvegarder le point?",CONFIRM_REMOVE_POINT:"Voulez-vous supprimer le favorit?",ITINERARY_COVER_TITLE:"Couverture de l'itin\xe9raire",ITINERARY_HOME:"Accueil de l'itin\xe9raire",ITEMS:"El\xe9ments",INFOS:"Informations",SHOW_MAP:"Afficher la carte",FAVORITES:"Favorits",FAVORIT:"Favorit",FB_ERROR_AUTH:"Erreur sur l'authentification",FB_UNDEFINED_DB:"Base de donn\xe9es pas definie",FB_UNDEFINED_DB_NAME:"Nom de la base de donn\xe9es pas defini",FB_UNDEFINED_PATH:"Pas de chemin defini",FB_UNDEFINED_ITEM_TO_EDIT:"Pas d'\xe9l\xe9ment \xe0 modifier dans Firebase",FB_UNDEFINED_ITEM_TO_DELETE:"Pas d'\xe9l\xe9ment \xe0 supprimer dans Firebase",ASDD_REJECT_JSON:"Service ASDD: Json rejet\xe9",ASDD_AJAX_ERROR:"Service ASDD: Erreur ajax",LINK_DD:"Lien D\xe9veloppement Durable",DID_YOU_KNOW:"Le saviez vous ?",TO_KNOW_MORE:"Pour en savoir plus...",PHOTOS:"Photos",USER_ADMIN:"Administration",USER_LOGIN:"Connexion",USER_CREATE_ACCOUNT:"Cr\xe9er un compte",USER_LOGOUT:"D\xe9connecter",USER_CONFIRM_LOGOUT:"Voulez-vous VRAIMENT vous d\xe9connecter ?",CONFIRM_DISGREE:"Annuler",CONFIRM_AGREE:"OK",LOADING_ITINERARY:"Chargement de l'itin\xe9raire...",LOADING_POINT:"Chargement du point...",POINTS_LIST:"Liste des points"},r["en-UK"]={HOME:"Home",WELCOME:"Welcome!",GUIDE_DEC:"Discovery Guide",GUIDES_ITI:"Guides / Itineraries",GUIDES_DEC:"Discovery Guides",ITINERARIES:"Itineraries",ITINERARY:"Itinerary",ITINERARY_LIST:"List of itineraries",SHOW_ITINERARY_LIST:"View the list of itineraries",CHOICE_ITINERARY:"Choice your itinerary",PRESENTATION:"Presentation",ORDER_GUIDE:"Order guide",PREP_GUIDE:"Guide in preparation",EDITED_GUIDE:"Edited guide",DISCOVERY_GUIDE:"Discovery guide",OBJECTS:"Objects",THEMES:"Themes",FOCUS:"Focus",OBJECTS_LIST:"Objects, Themes, Focus",RGSMAP_LEGEND:"Legend",RGSMAP_ITINERARY:"Course layout",RGSMAP_BTN_SHOW:"View",RGSMAP_BTN_SHOW_ITINERARY:"View itinerary",RGSMAP_BTN_SHOW_DESC:"Click to display the panorama",RGSMAP_BTN_ITINERARY:"Itinerary",RGSMAP_BTN_ITINERARY_DESC:"Click to return to the initial state",RGSMAP_WEBSITES:"Municipal sites",RGSMAP_ACTIONS_DD:"DD Actions",LOADING:"Loading",GET_ALL_PRINCIPLES:"See all principles",SHOW_WEBSITE:"See the website",ADD_FAVORIT:"Add favorit?",CONFIRM_SAVE_FAVORIT:"Do you want to save the favorit?",CONFIRM_SAVE_POINT:"Do you want to save the point?",CONFIRM_REMOVE_POINT:"Do you want to remove the favorit?",ITINERARY_COVER_TITLE:"Itinerary coverage",ITINERARY_HOME:"Home of the itinerary",ITEMS:"Items",INFOS:"Informations",SHOW_MAP:"Show map",FAVORITES:"Favorits",FAVORIT:"Favorit",FB_ERROR_AUTH:"Error on Auth",FB_UNDEFINED_DB:"Database not defined",FB_UNDEFINED_DB_NAME:"Database name not defined",FB_UNDEFINED_PATH:"No path defined",FB_UNDEFINED_ITEM_TO_EDIT:"No item to edit in Firebase",FB_UNDEFINED_ITEM_TO_DELETE:"No item to delete in Firebase",ASDD_REJECT_JSON:"ASDD Service: Reject json",ASDD_AJAX_ERROR:"ASDD Service: Ajax error",LINK_DD:"Sustainable Development Link",DID_YOU_KNOW:"Did you know ?",TO_KNOW_MORE:"To know more...",PHOTOS:"Photos",USER_ADMIN:"Administration",USER_LOGIN:"Login",USER_CREATE_ACCOUNT:"Create account",USER_LOGOUT:"Logout",USER_CONFIRM_LOGOUT:"Do you REALLY want to log out?",CONFIRM_DISGREE:"Disagree",CONFIRM_AGREE:"Agree",LOADING_ITINERARY:"Loading itinerary...",LOADING_POINT:"Loading point...",POINTS_LIST:"Points List"};var i,s=r,a=n("CcnG"),u=n("U8hQ");n.d(t,"a",function(){return p}),function(e){e.config="config",e.languages="languages"}(i||(i={}));var p=function(){function e(e){this._storage=e,this.initializeConfig()}return e.prototype.getConfigName=function(){return"rgs_itineraries"},e.prototype.initializeConfig=function(){var e=this;this.getAllConfig().then(function(t){t||e.setDefaultConfig()})},e.prototype.setDefaultConfig=function(){this.setConfig(o,s)},e.prototype.getAllConfig=function(){return this._storage.get(this.getConfigName())},e.prototype.setConfig=function(e,t){void 0===e&&(e=o),void 0===t&&(t=s);var n={config:e,languages:t};return this._storage.set(this.getConfigName(),n)},e.prototype.removeConfig=function(){return this._storage.remove(this.getConfigName())},e.prototype.getConfigCategory=function(e){return this.getAllConfig().then(function(t){return void 0!==i[e]?t[e]:null})},e.prototype.getConfigItem=function(e){return this.getAllConfig().then(function(t){for(var n in i)for(var o in t[n])if("object"==typeof t[n][o]&&e!==o){for(var r in t[n][o])if(r===e)return t[n][o][r]}else if(o===e)return t[n][o];return null})},e.prototype.getCurLanguage=function(){return this.getConfigItem("lang").then(function(e){return void 0!==s[e]?s[e]:null})},e.prototype.setCurLanguage=function(e){void 0===e&&(e="fr-FR")},e.ngInjectableDef=a.R({factory:function(){return new e(a.V(u.a))},token:e,providedIn:"root"}),e}()},caAo:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var o=n("08S2"),r=n("1dSU"),i=n("67Y/"),s=n("CcnG"),a=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(e){i(e)}}function a(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},u=function(e,t){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},p=function(){function e(e,t){this._http=e,this._storage=t,this.initConnexion()}return e.prototype.initConnexion=function(){return a(this,void 0,void 0,function(){var e=this;return u(this,function(t){switch(t.label){case 0:return this.curUser=null,[4,this._storage.get("user","login").then(function(t){t?e.curUser=t:e.getUser("5b3f2347881bf30023125643").then(function(t){t.subscribe(function(t){e.initConnexion()})})})];case 1:return t.sent(),[2]}})})},e.prototype.getUsers=function(){return this._http.get("server","api/users").pipe(Object(i.a)(function(e){return e||[]}))},e.prototype.storeUser=function(e){return a(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,this._storage.set("user","login",e)];case 1:return[2,t.sent()]}})})},e.prototype.getUser=function(e){return a(this,void 0,void 0,function(){var t=this;return u(this,function(n){switch(n.label){case 0:return[4,this._http.get("server","api/users/"+e).pipe(Object(i.a)(function(e){return e?"Error"===e.name?(t.curUser=null,null):void t.storeUser(e).then(function(e){return t.curUser=e,e}):(t.curUser=null,{error:"Not user value"})}))];case 1:return[2,n.sent()]}})})},e.prototype.isConnected=function(){return void 0!==this.curUser},e.prototype.getCurUser=function(){return this.curUser},e.prototype.getCurUserId=function(){return this.getCurUser()._id.$oid},e.prototype.userLogin=function(){console.log("USER LOGIN:::")},e.prototype.userDeconnect=function(){console.log("DECONNECT:::")},e.prototype.userCreate=function(){console.log("CREATE:::")},e.prototype.openLoginUser=function(){console.log("OPEN LOGIN USER")},e.ngInjectableDef=s.R({factory:function(){return new e(s.V(o.a),s.V(r.a))},token:e,providedIn:"root"}),e}()},mSn9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MapComponent});var _map_config__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("wQtS"),_services_config_config_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("RAm3"),_services_users_users_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("caAo"),_services_favorites_favorites_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6YIE"),_services_itineraries_itineraries_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("vbyp"),MapComponent=function(){function MapComponent(e,t,n,o,r){this._config=e,this._itiService=t,this._fav=n,this._us=o,this._router=r,this._map=null,this._polygons=[],this._oldPoint=null,this._oldIconPoint=null,this.language=[],this.urlRoot="http://ateliers.nomades.ch/~garciasanchez/itineraries2/site/"}return MapComponent.prototype.ngOnInit=function(){var e=this;this._config.getConfigItem("paths").then(function(t){e._urls=t}),this._config.getCurLanguage().then(function(t){e.language=t})},MapComponent.prototype.ngAfterViewInit=function(){this.startMap()},MapComponent.prototype.ngOnDestroy=function(){},MapComponent.prototype.startMap=function(){var e=this;"undefined"==typeof google?this.loadGMapsAPI(this.mapSettings.api_key||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.api_key).then(function(t){e.initMap()}):this.initMap()},MapComponent.prototype.initMap=function(){var e=this,t=this.mapSettings.selector||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.selector,n={zoom:this.mapSettings.zoom||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.zoom,center:{lat:this.mapSettings.latitude||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.latitude,lng:this.mapSettings.longitude||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.longitude},panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,overviewMapControl:!1,scrollwheel:!1};if(this._map&&(this._map=null),this._map=new google.maps.Map(document.getElementById(t),n),this.mapSettings.customStyle||_map_config__WEBPACK_IMPORTED_MODULE_0__.a.customStyle){var o=this.getCustomStyle();this._map.setOptions({styles:o})}else this._map.setMapTypeId(google.maps.MapTypeId.HYBRID);if(this.mapMarkers){var r=this.getGuidesStatus();this.installLegend(this._map,r),this._markers$=this.mapMarkers,this.mapMarkers.subscribe(function(t){t&&e.setMarkers(e._map,t)})}else this.mapPoints&&(this._itinerary$=this.mapPoints,this.mapPoints.subscribe(function(t){t&&e.setItinerary(t)}))},MapComponent.prototype.getCustomStyle=function(){return[{stylers:[{hue:"#00ffe6"},{saturation:-20}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}]},MapComponent.prototype.getSettings=function(){return Object.assign(this.mapSettings,_map_config__WEBPACK_IMPORTED_MODULE_0__.a)},MapComponent.prototype.loadGMapsAPI=function(e){return void 0===this._promise&&(this._promise=new Promise(function(t){if(window.__onGapiLoaded=function(e){t(google)},"undefined"==typeof google){var n=document.createElement("script");n.src="//maps.googleapis.com/maps/api/js?key="+e+"&callback=__onGapiLoaded",n.async=!0,document.body.appendChild(n)}else t()})),this._promise},MapComponent.prototype.setMarkers=function(e,t){var n=this;t.forEach(function(t){n.place_marker_fn(e,t,n.mapContext)})},MapComponent.prototype.getGuidesStatus=function(){return{_prep:{id:0,name:this.language.PREP_GUIDE,icon:this.urlRoot+"assets/images/bullet-preparation.png",shadow:this.urlRoot+"assets/images/bullet-shadow.png"},_edit:{id:1,name:this.language.EDITED_GUIDE,icon:this.urlRoot+"assets/images/bullet-edite.png",shadow:this.urlRoot+"assets/images/bullet-shadow.png"},_dec:{id:2,name:this.language.DISCOVERY_GUIDE,icon:this.urlRoot+"assets/images/bullet-decouverte.png",shadow:this.urlRoot+"assets/images/bullet-shadow.png"}}},MapComponent.prototype.installLegend=function(e,t){var n=document.getElementById("gmap-legend"),o=document.createElement("h3");for(var r in o.innerHTML="Legende",n.appendChild(o),t){var i=t[r],s=i.name,a=i.icon,u=document.createElement("p");u.innerHTML='<img src="'+a+'" alt="'+i+'"> '+s,n.appendChild(u)}n.style.left="-200px",e.controls[google.maps.ControlPosition.TOP_LEFT].push(n),n.style.left="0px",n.style.display="block"},MapComponent.prototype.place_marker_fn=function(e,t,n){var o=this,r=this.getGuidesStatus(),i=new google.maps.LatLng(parseFloat(t.iti_lat),parseFloat(t.iti_lng)),s=parseInt(t.iti_type),a=null;switch(t.iti_objects.split(","),s){case 0:a=r._prep;break;case 1:a=r._edit;break;case 2:a=r._dec}var u={url:a.icon,scaledSize:new google.maps.Size(42,42),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(21,21)},p=new google.maps.Marker({title:t.iti_name,position:i,icon:u,map:this._map,animation:google.maps.Animation.DROP,opacity:.9}),c="",l="",d="";s>0&&(d+='<img alt="Blason" src="'+this.urlRoot+"assets/images/cover-"+t.id+'.jpg" style=" height:110px; vertical-align:middle; margin-right: 0px; float:right" />'),""!==t.iti_description&&(l="<p>"+t.iti_description+"</p>"),c+='<div class="GM-info-bulle">\n      <h1>'+t.iti_name+"</h1>\n      "+l+"\n      <h2>"+a.name+"</h2>",s>0&&(c+='<p><ion-button id="infoWindowButton-'+t.id+'" class="ion-button gmap-bubble-item-link btn waves-effect waves-light deep-purple"><ion-icon name="walk"></ion-icon> Voir itin\xe9raire</ion-button>',c+='<ion-button id="favWindowButton-'+t.id+'" class="ion-button gmap-bubble-item-link btn waves-effect waves-light deep-purple"><ion-icon name="heart"></ion-icon> Favorit</ion-button></p>'),c+="<hr />",t.iti_details.forEach(function(e){c+='<p><img alt="'+e.o_title+'" src="'+o._urls.blasons_url+e.ode_badge+'" style=" height:20px; vertical-align:middle; margin-right: 10px;" /><a href="'+o._urls.pec_url+"?p=object&o="+e.id+'" target="_blank"><b>'+e.o_title+"</b>: voir actions DD</a></p>"}),c+=""+d,c+="</div>";var h=new google.maps.InfoWindow;h.setContent(c),google.maps.event.addListener(p,"click",function(r){h.setPosition(r.latLng),h.open(o._map,p),google.maps.event.addListener(h,"domready",function(){jQuery(".GM-info-bulle").css({width:"384px",height:"314px",overflow:"hidden",padding:"0px"}),document.getElementById("infoWindowButton-"+t.id).addEventListener("click",function(){"function"==typeof n.goItinerary&&n.goItinerary(t)}),document.getElementById("favWindowButton-"+t.id).addEventListener("click",function(){"function"==typeof n.setFavorit&&n.setFavorit(t)})}),google.maps.event.addListenerOnce(h,"closeclick",function(){e.panTo(p.getPosition())})})},MapComponent.prototype.createPolygons=function(e,t){var n=this;t.length>0&&t.forEach(function(t){n._polygons.includes(t)||(n._polygons.push(t),n._itiService.loadPolygon(t,"coordinates").subscribe(function(t){void 0!==t.polygons?n.drawPolygon(n._map,t.polygons,e):console.log("POLYGON NULL")}))})},MapComponent.prototype.drawPolygon=function(_map,_polygons,_type){console.log("POLYGON DRAW",_type);var _POLYGONS=_polygons,_ID=_POLYGONS[0].ID,_color="#DD78EC";0===_type?_color="#efb029":2===_type&&(_color="#214f6b");for(var _i=0;_i<_POLYGONS.length;_i++){var _objPoly=_POLYGONS[_i],_lineColor=_objPoly.strockeColor.toUpperCase(),_lineOpacity=_objPoly.strockeOpacity,_lineWeight=_objPoly.strockeWeight,_fillColor=_color,_fillOpacity=_objPoly.fillOpacity,_path=eval(_objPoly.paths),_polygon=new google.maps.Polygon({strokeColor:_lineColor,strokeOpacity:_lineOpacity,strokeWeight:_lineWeight,fillColor:_fillColor,fillOpacity:_fillOpacity});_polygon.setMap(_map)}},MapComponent.prototype.getLatLng=function(e){return new google.maps.LatLng(e.iti_lat,e.iti_lng)},MapComponent.prototype.coordsToLatLngs=function(e){var t=[];return jQuery.each(e,function(e,n){var o=n.split(","),r=parseFloat(o[0]),i=parseFloat(o[1]);!1===isNaN(r)&&!1===isNaN(i)&&t.push(new google.maps.LatLng(r,i))}),t},MapComponent.prototype.getTypesPoints=function(e){var t=e.datas,n=new Array({container:"list-objects",color:"green",title:this.language.OBJECTS,datas:new Array},{container:"list-themes",color:"blue",title:this.language.THEMES,datas:new Array},{container:"list-encadres",color:"gray",title:this.language.FOCUS,datas:new Array});return t.forEach(function(e,t){var o=parseInt(e.imk_type);o<n.length&&n[o].datas.push(e)}),n},MapComponent.prototype.installPointsLegend=function(e,t,n){var o=document.getElementById("gmap-legend"),r=document.createElement("h3");if(r.innerHTML=this.language.RGSMAP_LEGEND,o.appendChild(r),"object"==typeof t){var i=document.createElement("p");i.innerHTML='<span style="background:'+t.ico_strokeColor+';">&nbsp;</span> '+this.language.RGSMAP_ITINERARY,o.appendChild(i)}o.style.left="-200px",e.controls[google.maps.ControlPosition.TOP_LEFT].push(o),o.style.left="0px",o.style.display="block"},MapComponent.prototype.displayMainArea=function(e,t){if(void 0!==t){var n=t.ico_coordinates,o=(n=n.replace(/\r\n/gi,"")).split(";"),r=t.ico_strokeColor,i=parseFloat(t.ico_strokeOpacity),s=parseInt(t.ico_strokeWeight);""===r&&(r="#000000"),void 0===t.ico_strokeOpacity&&(i=1),0==s&&(s=1),new google.maps.Polyline({path:this.coordsToLatLngs(o),strokeColor:r,strokeOpacity:i,strokeWeight:s,visible:!0,clickable:!1,zIndex:1,map:e})}},MapComponent.prototype.displayShortcutAreas=function(e,t,n){for(var o=/\r\n/gi,r=0,i=n.datas;r<i.length;r++){var s=i[r];if(t===s.ish_itineraire_ID){var a=s.ish_coordinates,u=(a=a.replace(o,"")).split(";"),p=s.ish_strokeColor,c=parseFloat(s.ish_strokeOpacity),l=parseInt(s.ish_strokeWeight);if(""===p&&(p="#000000"),void 0===s.ish_strokeOpacity&&(c=1),0===l&&(l=1),new google.maps.Polyline({path:this.coordsToLatLngs(u),strokeColor:p,strokeOpacity:c,strokeWeight:l,visible:!0,clickable:!1,zIndex:1,map:e}),""!==s.ish_title){var d=document.getElementById("gmap-legend"),h=document.createElement("p");h.innerHTML='<span style="background:'+p+';">&nbsp;</span> '+s.ish_title,d.appendChild(h)}}}},MapComponent.prototype.setPoint=function(e,t){var n=this._urls.cdn_img_url+"gmaps/active/"+t.imk_iconActive;null!==this._oldPoint&&(this._oldPoint.setIcon(this._oldIconPoint),this._oldPoint=null,this._oldIconPoint=null),this._oldPoint=e,this._oldIconPoint=e.getIcon();var o={url:n,scaledSize:new google.maps.Size(16,16),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)};e.setIcon(o)},MapComponent.prototype.addPoint=function(e,t,n,o){var r=this,i=this._urls.cdn_img_url+"gmaps/",s=new google.maps.LatLng(t.imk_lat,t.imk_lng),a={url:i+n+"/"+t.imk_icon,scaledSize:new google.maps.Size(16,16),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},u=new google.maps.Marker({position:s,map:e,icon:a,shape:{coord:[11,0,13,1,14,2,14,3,15,4,15,5,15,6,15,7,15,8,15,9,15,10,15,11,15,12,15,13,15,14,15,15,0,15,0,14,0,13,1,12,0,11,0,10,0,9,0,8,0,7,0,6,0,5,0,4,1,3,1,2,2,1,4,0,11,0],type:"poly"},title:t.imk_title,opacity:.9,zIndex:parseInt(t.imk_index_Z)});google.maps.event.addListener(u,"click",function(e){r.setPoint(u,t),"function"==typeof r.mapContext.onPoint&&r.mapContext.onPoint(t)})},MapComponent.prototype.displayPoints=function(e,t){var n=this;this.getTypesPoints(t).forEach(function(t,o){var r=t.datas;if(r.length>0){var i=0;r.forEach(function(o,r){n.addPoint(e,o,t.color,i),i++})}})},MapComponent.prototype.setItinerary=function(e){var t=e.Itinerary,n=e.ItineraryCoordinates,o=e.ItineraryShortcut,r=e.ItineraryMarkers;console.log("CHECK ITI:::",e);var i=new google.maps.LatLng(t.iti_lat,t.iti_lng),s=parseInt(t.iti_zoom);this._map.panTo(i),this._map.setZoom(s),this.installPointsLegend(this._map,n,o),this.displayMainArea(this._map,n),this.displayShortcutAreas(this._map,t.id,o),this.displayPoints(this._map,r)},MapComponent}()},"t/Na":function(e,t,n){"use strict";n.d(t,"k",function(){return x}),n.d(t,"l",function(){return M}),n.d(t,"o",function(){return G}),n.d(t,"p",function(){return j}),n.d(t,"m",function(){return k}),n.d(t,"n",function(){return L}),n.d(t,"b",function(){return d}),n.d(t,"f",function(){return l}),n.d(t,"c",function(){return R}),n.d(t,"g",function(){return h}),n.d(t,"a",function(){return A}),n.d(t,"d",function(){return H}),n.d(t,"e",function(){return B}),n.d(t,"h",function(){return U}),n.d(t,"j",function(){return N}),n.d(t,"i",function(){return F});var o=n("CcnG"),r=n("F/XL"),i=n("6blF"),s=n("Phjn"),a=n("VnD/"),u=n("67Y/"),p=n("mrSG"),c=n("Ip0R"),l=function(){},d=function(){},h=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var o=e.slice(0,n),r=o.toLowerCase(),i=e.slice(n+1).trim();t.maybeSetNormalizedName(o,r),t.headers.has(r)?t.headers.get(r).push(i):t.headers.set(r,[i])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var o=e[n],r=n.toLowerCase();"string"==typeof o&&(o=[o]),o.length>0&&(t.headers.set(r,o),t.maybeSetNormalizedName(n,r))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var o=("a"===e.op?this.headers.get(t):void 0)||[];o.push.apply(o,Object(p.d)(n)),this.headers.set(t,o);break;case"d":var r=e.value;if(r){var i=this.headers.get(t);if(!i)return;0===(i=i.filter(function(e){return-1===r.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,i)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),f=function(){function e(){}return e.prototype.encodeKey=function(e){return _(e)},e.prototype.encodeValue=function(e){return _(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function _(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var g=function(){function e(e){void 0===e&&(e={});var t,n,o,r=this;if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new f,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,o=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),r=Object(p.c)(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),i=r[0],s=r[1],a=o.get(i)||[];a.push(s),o.set(i,a)}),o)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];r.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var o=e.map.get(t.param)||[],r=o.indexOf(t.value);-1!==r&&o.splice(r,1),o.length>0?e.map.set(t.param,o):e.map.delete(t.param)}}),this.cloneFrom=null)},e}();function y(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function m(e){return"undefined"!=typeof Blob&&e instanceof Blob}function E(e){return"undefined"!=typeof FormData&&e instanceof FormData}var v=function(){function e(e,t,n,o){var r;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==n?n:null,r=o):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.params&&(this.params=r.params)),this.headers||(this.headers=new h),this.params){var i=this.params.toString();if(0===i.length)this.urlWithParams=t;else{var s=t.indexOf("?");this.urlWithParams=t+(-1===s?"?":s<t.length-1?"&":"")+i}}else this.params=new g,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:y(this.body)||m(this.body)||E(this.body)||"string"==typeof this.body?this.body:this.body instanceof g?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:E(this.body)?null:m(this.body)?this.body.type||null:y(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof g?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,o=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,p=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(p=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},p)),new e(n,o,i,{params:p,headers:u,reportProgress:a,responseType:r,withCredentials:s})},e}(),S=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),I=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new h,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),C=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=S.ResponseHeader,n}return Object(p.b)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(I),b=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=S.Response,n.body=void 0!==t.body?t.body:null,n}return Object(p.b)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(I),O=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return Object(p.b)(t,e),t}(I);function T(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var R=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var o,i=this;if(void 0===n&&(n={}),e instanceof v)o=e;else{var p;p=n.headers instanceof h?n.headers:new h(n.headers);var c=void 0;n.params&&(c=n.params instanceof g?n.params:new g({fromObject:n.params})),o=new v(e,t,void 0!==n.body?n.body:null,{headers:p,params:c,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var l=Object(r.a)(o).pipe(Object(s.a)(function(e){return i.handler.handle(e)}));if(e instanceof v||"events"===n.observe)return l;var d=l.pipe(Object(a.a)(function(e){return e instanceof b}));switch(n.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return d.pipe(Object(u.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return d.pipe(Object(u.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return d.pipe(Object(u.a)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return d.pipe(Object(u.a)(function(e){return e.body}))}case"response":return d;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new g).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,T(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,T(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,T(n,t))},e}(),w=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),A=new o.o("HTTP_INTERCEPTORS"),P=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),D=/^\)\]\}',?\n/,N=function(){},M=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),U=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new i.a(function(n){var o=t.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach(function(e,t){return o.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var r=e.detectContentTypeHeader();null!==r&&o.setRequestHeader("Content-Type",r)}if(e.responseType){var i=e.responseType.toLowerCase();o.responseType="json"!==i?i:"text"}var s=e.serializeBody(),a=null,u=function(){if(null!==a)return a;var t=1223===o.status?204:o.status,n=o.statusText||"OK",r=new h(o.getAllResponseHeaders()),i=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(o)||e.url;return a=new C({headers:r,status:t,statusText:n,url:i})},p=function(){var t=u(),r=t.headers,i=t.status,s=t.statusText,a=t.url,p=null;204!==i&&(p=void 0===o.response?o.responseText:o.response),0===i&&(i=p?200:0);var c=i>=200&&i<300;if("json"===e.responseType&&"string"==typeof p){var l=p;p=p.replace(D,"");try{p=""!==p?JSON.parse(p):null}catch(e){p=l,c&&(c=!1,p={error:e,text:p})}}c?(n.next(new b({body:p,headers:r,status:i,statusText:s,url:a||void 0})),n.complete()):n.error(new O({error:p,headers:r,status:i,statusText:s,url:a||void 0}))},c=function(e){var t=new O({error:e,status:o.status||0,statusText:o.statusText||"Unknown Error"});n.error(t)},l=!1,d=function(t){l||(n.next(u()),l=!0);var r={type:S.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(r.total=t.total),"text"===e.responseType&&o.responseText&&(r.partialText=o.responseText),n.next(r)},f=function(e){var t={type:S.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return o.addEventListener("load",p),o.addEventListener("error",c),e.reportProgress&&(o.addEventListener("progress",d),null!==s&&o.upload&&o.upload.addEventListener("progress",f)),o.send(s),n.next({type:S.Sent}),function(){o.removeEventListener("error",c),o.removeEventListener("load",p),e.reportProgress&&(o.removeEventListener("progress",d),null!==s&&o.upload&&o.upload.removeEventListener("progress",f)),o.abort()}})},e}(),k=new o.o("XSRF_COOKIE_NAME"),L=new o.o("XSRF_HEADER_NAME"),F=function(){},G=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c.u)(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),j=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var o=this.tokenService.getToken();return null===o||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,o)})),t.handle(e)},e}(),x=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(A,[]);this.chain=t.reduceRight(function(e,t){return new w(e,t)},this.backend)}return this.chain.handle(e)},e}(),B=function(){function e(){}return e.disable=function(){return{ngModule:e,providers:[{provide:j,useClass:P}]}},e.withOptions=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.cookieName?{provide:k,useValue:t.cookieName}:[],t.headerName?{provide:L,useValue:t.headerName}:[]]}},e}(),H=function(){}},vbyp:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n("67Y/"),r=n("08S2"),i=n("CcnG"),s=function(){function e(e){this._http=e}return e.prototype.loadItineraries=function(){return this._http.get("asddWS","?ws-service=itinerary&ws-action=get_itineraries").pipe(Object(o.a)(function(e){return e.SUCCESS?e.SUCCESS.datas:[]}))},e.prototype.loadItinerary=function(e,t){return void 0===t&&(t=""),this._http.get("asddWS","?ws-service=itinerary&ws-action=get_itinerary&ws-item="+e).pipe(Object(o.a)(function(e){if(e.SUCCESS){var n=e.SUCCESS;switch(t){case"Itinerary":void 0!==e.SUCCESS.Itinerary&&(n=e.SUCCESS.Itinerary);break;case"ItineraryCoordinates":if(void 0!==e.SUCCESS.ItineraryCoordinates)return e.SUCCESS.ItineraryCoordinates;break;case"ItineraryMarkers":void 0!==e.SUCCESS.ItineraryMarkers.datas&&(n=e.SUCCESS.ItineraryMarkers.datas);break;case"ItineraryPage":void 0!==e.SUCCESS.ItineraryPage&&(n=e.SUCCESS.ItineraryPage);break;case"ItineraryShortcut":if(void 0!==e.SUCCESS.ItineraryShortcut.datas)return e.SUCCESS.ItineraryShortcut.datas}return n}return[]}))},e.prototype.loadPoint=function(e,t){return void 0===t&&(t=""),this._http.get("asddWS","?ws-service=itinerary&ws-action=get_marker&ws-item="+e).pipe(Object(o.a)(function(e){if(e.SUCCESS){switch(t){case"Files":if(void 0!==e.SUCCESS.Files)return e.SUCCESS.Files;break;case"Marker":if(void 0!==e.SUCCESS.Marker)return e.SUCCESS.Marker;break;case"Page":if(void 0!==e.SUCCESS.Page)return e.SUCCESS.Page}return e.SUCCESS}return[]}))},e.prototype.loadPolygon=function(e,t){return void 0===t&&(t=""),this._http.get("asddPECWS","?ws-service=frontend&ws-action=obj_get_record&id="+e).pipe(Object(o.a)(function(e){if(e.SUCCESS)switch(t){case"banner":if(void 0!==e.SUCCESS.banner)return e.SUCCESS.banner;break;case"contacts":if(void 0!==e.SUCCESS.contacts)return e.SUCCESS.contacts;break;case"coordinates":if(void 0!==e.SUCCESS.coordinates)return e.SUCCESS.coordinates;break;case"details":if(void 0!==e.SUCCESS.details)return e.SUCCESS.details;break;case"domains":if(void 0!==e.SUCCESS.domains)return e.SUCCESS.domains;break;case"coordinates":if(void 0!==e.SUCCESS.object)return e.SUCCESS.object;break;default:return e.SUCCESS}return[]}))},e.ngInjectableDef=i.R({factory:function(){return new e(i.V(r.a))},token:e,providedIn:"root"}),e}()},wQtS:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={selector:"map",latitude:46.2587,longitude:6.11938,zoom:11,customStyle:!1,api_key:"AIzaSyDJXHoRw6f7SuuH-YHHV5M03aa3wrL6SRA",lang:"fr-FR",markers:[]}}}]);